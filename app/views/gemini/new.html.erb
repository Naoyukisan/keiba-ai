<% if @error.present? %>
  <hr class="my-4">
  <h2 class="text-danger fw-semibold">エラー</h2>
  <pre class="p-3 bg-light border border-danger rounded text-danger"><%= h(@error) %></pre>
<% end %>

<div class="row g-4 align-items-start">
  <!-- 左：予想フォーム（1） -->
  <div class="col-12 col-lg-2">
    <h2 class="mb-3">予想</h2>
    <%= form_with url: gemini_path, method: :post, data: { turbo: false } do |f| %>
      <table class="table table-borderless table-sm align-middle mb-2" style="width:100%;">
        <tr>
          <th class="text-nowrap pe-2">レース名</th>
          <td><%= f.text_field :race_name, class: "form-control form-control-sm" %></td>
        </tr>
        <tr>
          <th class="text-nowrap pe-2">日付</th>
          <td><%= f.date_field :date, class: "form-control form-control-sm" %></td>
        </tr>
        <tr>
          <th class="text-nowrap pe-2">時間</th>
          <td><%= f.time_field :time, class: "form-control form-control-sm" %></td>
        </tr>
        <tr>
          <th class="text-nowrap pe-2">競馬場</th>
          <td><%= f.text_field :place, class: "form-control form-control-sm" %></td>
        </tr>
        <tr>
          <th class="text-nowrap pe-2">ラウンド</th>
          <td><%= f.number_field :round, class: "form-control form-control-sm" %></td>
        </tr>
        <tr>
          <th class="text-nowrap pe-2">クラス</th>
          <td><%= f.text_field :class_name, class: "form-control form-control-sm" %></td>
        </tr>
        <tr>
          <th class="text-nowrap pe-2">距離</th>
          <td><%= f.text_field :distance, class: "form-control form-control-sm" %></td>
        </tr>
      </table>
      <%= f.submit "予想を始める", class: "btn btn-primary btn-sm w-100" %>
    <% end %>
  </div>

  <!-- 右：予想結果（5） -->
  <div class="col-12 col-lg-10">
    <h3 class="mb-3">予想結果</h3>
    <div class="bg-light border rounded p-3"
         style="height: 70vh; overflow-y: auto; white-space: pre-wrap; font-family: monospace; line-height: 1.5; font-size: 0.95rem;">
      <% if @answer.present? %>
        <%= simple_format(h(@answer)) %>
      <% else %>
        <span class="text-secondary">ここに予想結果が表示されます</span>
      <% end %>
    </div>
  </div>
</div>
